<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Goal Map Worksheet</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Lato', 'Helvetica Neue', Arial, sans-serif;
            color: #2D3B45;
            line-height: 1.6;
            padding: 0;
            background: transparent;
        }
        
        .canvas-container {
            max-width: 100%;
            margin: 0;
            padding: 20px 0;
        }
        
        .page-title {
            font-family: 'Crimson Pro', serif;
            font-size: 2.2em;
            color: #2D3B45;
            margin-bottom: 15px;
            font-weight: 700;
            border-bottom: 3px solid #0374B5;
            padding-bottom: 15px;
        }
        
        .page-subtitle {
            color: #556572;
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #F5F5F5;
            border-radius: 8px;
            border-left: 5px solid #0374B5;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-number {
            background: #0374B5;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1em;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .section h2 {
            font-family: 'Crimson Pro', serif;
            font-size: 1.8em;
            color: #2D3B45;
            font-weight: 700;
            margin: 0;
        }
        
        .section-subtitle {
            color: #556572;
            font-style: italic;
            margin-bottom: 20px;
            font-size: 1.05em;
        }
        
        .instruction-box {
            background: white;
            border: 2px solid #D3D8DC;
            border-radius: 6px;
            padding: 18px;
            margin-bottom: 20px;
        }
        
        .instruction-box h4 {
            color: #C7493A;
            margin-bottom: 12px;
            font-size: 1.05em;
            font-weight: 700;
        }
        
        .instruction-box ul {
            margin-left: 20px;
            color: #556572;
        }
        
        .instruction-box li {
            margin-bottom: 6px;
        }
        
        .instruction-box p {
            color: #556572;
            margin-top: 8px;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #C7CDD1;
            border-radius: 4px;
            font-family: 'Lato', sans-serif;
            font-size: 0.95em;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.2s ease;
            background: white;
        }
        
        textarea:focus {
            outline: none;
            border-color: #0374B5;
            box-shadow: 0 0 0 2px rgba(3, 116, 181, 0.1);
        }
        
        textarea.long {
            min-height: 250px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #C7CDD1;
            border-radius: 4px;
            font-family: 'Lato', sans-serif;
            font-size: 0.95em;
            transition: border-color 0.2s ease;
            background: white;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #0374B5;
            box-shadow: 0 0 0 2px rgba(3, 116, 181, 0.1);
        }
        
        .goal-card {
            background: white;
            border: 2px solid #C7CDD1;
            border-radius: 6px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .goal-card h4 {
            color: #0374B5;
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: 700;
            padding-bottom: 10px;
            border-bottom: 2px solid #E1E6EA;
        }
        
        .field-label {
            font-weight: 700;
            color: #2D3B45;
            margin-bottom: 8px;
            display: block;
            font-size: 0.9em;
        }
        
        .field-group {
            margin-bottom: 20px;
        }
        
        .helper-section {
            background: #F9FAFB;
            border: 2px dashed #C7CDD1;
            border-radius: 6px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .helper-section h5 {
            color: #C7493A;
            margin-bottom: 15px;
            font-size: 1.05em;
            font-weight: 700;
        }
        
        .action-card {
            background: white;
            border: 2px solid #C7CDD1;
            border-left: 5px solid #C7493A;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .action-card h5 {
            color: #0374B5;
            margin-bottom: 15px;
            font-size: 1.05em;
            font-weight: 700;
        }
        
        .why-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .why-card {
            background: white;
            border: 2px solid #C7CDD1;
            border-radius: 6px;
            padding: 20px;
        }
        
        .why-card h4 {
            color: #C7493A;
            margin-bottom: 12px;
            font-size: 1.1em;
            font-weight: 700;
        }
        
        .why-card textarea {
            min-height: 120px;
        }
        
        .add-button {
            background: #0374B5;
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 4px;
            font-family: 'Lato', sans-serif;
            font-size: 0.95em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-top: 15px;
        }
        
        .add-button:hover {
            background: #025A8C;
        }
        
        .add-button:active {
            transform: translateY(1px);
        }
        
        .save-print-section {
            background: #E8F4F8;
            border: 2px solid #0374B5;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            margin-top: 40px;
        }
        
        .save-print-section h3 {
            color: #0374B5;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .primary-button {
            background: #0374B5;
            color: white;
            border: none;
            padding: 14px 35px;
            border-radius: 4px;
            font-family: 'Lato', sans-serif;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .primary-button:hover {
            background: #025A8C;
        }
        
        .secondary-button {
            background: white;
            color: #0374B5;
            border: 2px solid #0374B5;
            padding: 14px 35px;
            border-radius: 4px;
            font-family: 'Lato', sans-serif;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .secondary-button:hover {
            background: #0374B5;
            color: white;
        }
        
        .save-print-section p {
            color: #556572;
            margin-top: 15px;
            font-size: 0.95em;
        }
        
        .word-count {
            text-align: right;
            color: #556572;
            font-size: 0.85em;
            margin-top: 6px;
            font-style: italic;
        }
        
        .alert-box {
            background: #FFF3CD;
            border: 1px solid #FFC107;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }
        
        .alert-box strong {
            display: block;
            margin-bottom: 5px;
        }
        
        @media (max-width: 768px) {
            .page-title {
                font-size: 1.8em;
            }
            
            .section {
                padding: 20px 15px;
            }
            
            .section h2 {
                font-size: 1.5em;
            }
            
            .why-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .primary-button,
            .secondary-button {
                width: 100%;
            }
        }
        
        @media print {
            body {
                background: white;
            }
            
            .save-print-section {
                display: none;
            }
            
            .add-button {
                display: none;
            }
            
            .section {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            textarea,
            input[type="text"] {
                border: 1px solid #999;
                background: white;
            }
        }
    </style>
</head>
<body>
    <div class="canvas-container">
        <h1 class="page-title">Career Goal Map Worksheet</h1>
        <p class="page-subtitle">A comprehensive framework for aligning your long-term vision with actionable steps, grounded in what motivates you and supported by the right people.</p>
        
        <div class="alert-box">
            <strong>ðŸ’¾ Auto-Save Enabled</strong>
            Your work is automatically saved in your browser every 30 seconds. You can close and return to this page anytime.
        </div>
        
        <!-- Section 1: Long-Term Goal -->
        <div class="section">
            <div class="section-header">
                <span class="section-number">1</span>
                <h2>Long-Term Goal</h2>
            </div>
            <p class="section-subtitle">Your North Star (5-10 years)</p>
            
            <div class="instruction-box">
                <h4>Write a narrative description (300-400 words) including:</h4>
                <ul>
                    <li>What you want to be doing professionally during a typical week</li>
                    <li>Where you want to be living and how your professional activities integrate with desired lifestyle</li>
                    <li>What kind of income and stability you're working toward</li>
                    <li>Who you want to be working with or for</li>
                    <li>What impact you want your work to be having</li>
                    <li>What success looks like specifically for you at this future point</li>
                </ul>
            </div>
            
            <textarea id="longterm" class="long" placeholder="Describe your professional life 5-10 years from now in vivid detail..."></textarea>
            <div class="word-count" id="longterm-count">0 words</div>
        </div>
        
        <!-- Section 2: Motivational Foundation -->
        <div class="section">
            <div class="section-header">
                <span class="section-number">2</span>
                <h2>Motivational Foundation</h2>
            </div>
            <p class="section-subtitle">The WHY Behind Your Goals</p>
            
            <div class="instruction-box">
                <h4>Be ruthlessly specific and honest. This is for you, not for external evaluation.</h4>
            </div>
            
            <div class="why-grid">
                <div class="why-card">
                    <h4>Intrinsic Satisfaction</h4>
                    <label class="field-label">What about your long-term goal(s) feeds you, "fills your cup", inspires you?</label>
                    <textarea id="intrinsic" placeholder="What lights you up about this vision?"></textarea>
                </div>
                
                <div class="why-card">
                    <h4>Values Alignment</h4>
                    <label class="field-label">How does your long-term goal(s) align with what you believe, what matters to you, what you stand for?</label>
                    <textarea id="values" placeholder="What values does this vision honor?"></textarea>
                </div>
                
                <div class="why-card">
                    <h4>Desired Impact</h4>
                    <label class="field-label">What difference will achieving your long-term goal(s) make? For whom?</label>
                    <textarea id="impact" placeholder="Who benefits from your work and how?"></textarea>
                </div>
            </div>
        </div>
        
        <!-- Section 3: Medium-Term Goals -->
        <div class="section">
            <div class="section-header">
                <span class="section-number">3</span>
                <h2>Medium-Term Goals</h2>
            </div>
            <p class="section-subtitle">Backward Planning (1-3 years)</p>
            
            <div class="instruction-box">
                <h4>Identify 4-6 medium-term goals that emerge from your long-term vision.</h4>
            </div>
            
            <div id="medium-goals-container">
                <div class="goal-card">
                    <h4>Medium-Term Goal #1</h4>
                    
                    <div class="field-group">
                        <label class="field-label">SMART Goal Statement</label>
                        <input type="text" placeholder="State your goal using SMART criteria (Specific, Measurable, Achievable, Relevant, Time-bound)">
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Connection to Long-Term Vision</label>
                        <textarea placeholder="How does this goal move you toward your 5-10 year vision?"></textarea>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Alignment with Motivational Foundation</label>
                        <textarea placeholder="How does this goal connect to your WHY (intrinsic satisfaction, values, desired impact)?"></textarea>
                    </div>
                    
                    <div class="helper-section">
                        <h5>Support & Mentorship</h5>
                        
                        <div class="field-group">
                            <label class="field-label">Mentor Needed</label>
                            <textarea placeholder="Type of mentor needed, specific individual (if identified), how they can help, action to activate relationship"></textarea>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label">Peers Needed</label>
                            <textarea placeholder="Type of peers needed, specific individuals (if identified), how they can help, action to develop relationships"></textarea>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label">Champions Needed</label>
                            <textarea placeholder="Type of champions needed, specific individuals (if identified), how they can help, action to activate relationships"></textarea>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label">Practical Supporters</label>
                            <textarea placeholder="Who can provide practical support, what kind of support, action to secure this support"></textarea>
                        </div>
                        
                        <div class="field-group">
                            <label class="field-label">Professional Community</label>
                            <textarea placeholder="Community that can provide ongoing learning, networking, and encouragement. Current participation level and action to engage"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="add-button" onclick="addMediumGoal()">+ Add Another Medium-Term Goal</button>
        </div>
        
        <!-- Section 4: Short-Term Actions -->
        <div class="section">
            <div class="section-header">
                <span class="section-number">4</span>
                <h2>Short-Term Action Steps</h2>
            </div>
            <p class="section-subtitle">Next 1-3 Months</p>
            
            <div class="instruction-box">
                <h4>For each medium-term goal, identify 2-4 concrete actions you can complete in the next 1-3 months.</h4>
                <p>Each action should create a specific WIN that you can definitively determine success or failure for.</p>
            </div>
            
            <div id="short-actions-container">
                <h4 style="color: #0374B5; margin-bottom: 20px; font-weight: 700;">Actions for Medium-Term Goal #1</h4>
                
                <div class="action-card">
                    <h5>Action Step #1</h5>
                    <div class="field-group">
                        <label class="field-label">Specific Action</label>
                        <textarea placeholder="What exactly will you do? Be concrete and specific."></textarea>
                    </div>
                    <div class="field-group">
                        <label class="field-label">Timeline</label>
                        <input type="text" placeholder="When will you complete this? (e.g., 'This month', 'Weeks 2-3', 'By February 15')">
                    </div>
                    <div class="field-group">
                        <label class="field-label">WIN This Creates</label>
                        <textarea placeholder="What concrete win will completing this action create? How will you know you've succeeded?"></textarea>
                    </div>
                </div>
                
                <div class="action-card">
                    <h5>Action Step #2</h5>
                    <div class="field-group">
                        <label class="field-label">Specific Action</label>
                        <textarea placeholder="What exactly will you do? Be concrete and specific."></textarea>
                    </div>
                    <div class="field-group">
                        <label class="field-label">Timeline</label>
                        <input type="text" placeholder="When will you complete this?">
                    </div>
                    <div class="field-group">
                        <label class="field-label">WIN This Creates</label>
                        <textarea placeholder="What concrete win will completing this action create?"></textarea>
                    </div>
                </div>
            </div>
            
            <button class="add-button" onclick="addShortAction()">+ Add Another Action Step</button>
        </div>
        
        <div class="save-print-section">
            <h3>Save Your Work</h3>
            <p>Your work is automatically saved in your browser. Use the buttons below to create a permanent copy:</p>
            <div class="button-group">
                <button class="primary-button" onclick="printGoalMap()">ðŸ“„ Print / Save as PDF</button>
                <button class="secondary-button" onclick="copyToClipboard()">ðŸ“‹ Copy All Text</button>
                <button class="secondary-button" onclick="clearForm()">ðŸ”„ Start Over</button>
            </div>
            <p style="margin-top: 20px; font-size: 0.9em;">ðŸ’¡ Tip: To save as PDF, click "Print / Save as PDF" and select "Save as PDF" as your printer.</p>
        </div>
    </div>
    
    <script>
        let mediumGoalCount = 1;
        let shortActionCount = 2;
        
        // Word counter for long-term goal
        document.getElementById('longterm').addEventListener('input', function() {
            const text = this.value.trim();
            const words = text ? text.split(/\s+/).length : 0;
            document.getElementById('longterm-count').textContent = words + ' words';
            document.getElementById('longterm-count').style.color = words >= 300 && words <= 400 ? '#28A745' : '#556572';
        });
        
        function addMediumGoal() {
            mediumGoalCount++;
            const container = document.getElementById('medium-goals-container');
            const newGoal = document.createElement('div');
            newGoal.className = 'goal-card';
            newGoal.innerHTML = `
                <h4>Medium-Term Goal #${mediumGoalCount}</h4>
                
                <div class="field-group">
                    <label class="field-label">SMART Goal Statement</label>
                    <input type="text" placeholder="State your goal using SMART criteria (Specific, Measurable, Achievable, Relevant, Time-bound)">
                </div>
                
                <div class="field-group">
                    <label class="field-label">Connection to Long-Term Vision</label>
                    <textarea placeholder="How does this goal move you toward your 5-10 year vision?"></textarea>
                </div>
                
                <div class="field-group">
                    <label class="field-label">Alignment with Motivational Foundation</label>
                    <textarea placeholder="How does this goal connect to your WHY (intrinsic satisfaction, values, desired impact)?"></textarea>
                </div>
                
                <div class="helper-section">
                    <h5>Support & Mentorship</h5>
                    
                    <div class="field-group">
                        <label class="field-label">Mentor Needed</label>
                        <textarea placeholder="Type of mentor needed, specific individual (if identified), how they can help, action to activate relationship"></textarea>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Peers Needed</label>
                        <textarea placeholder="Type of peers needed, specific individuals (if identified), how they can help, action to develop relationships"></textarea>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Champions Needed</label>
                        <textarea placeholder="Type of champions needed, specific individuals (if identified), how they can help, action to activate relationships"></textarea>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Practical Supporters</label>
                        <textarea placeholder="Who can provide practical support, what kind of support, action to secure this support"></textarea>
                    </div>
                    
                    <div class="field-group">
                        <label class="field-label">Professional Community</label>
                        <textarea placeholder="Community that can provide ongoing learning, networking, and encouragement. Current participation level and action to engage"></textarea>
                    </div>
                </div>
            `;
            container.appendChild(newGoal);
            newGoal.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        function addShortAction() {
            shortActionCount++;
            const container = document.getElementById('short-actions-container');
            const newAction = document.createElement('div');
            newAction.className = 'action-card';
            newAction.innerHTML = `
                <h5>Action Step #${shortActionCount}</h5>
                <div class="field-group">
                    <label class="field-label">Specific Action</label>
                    <textarea placeholder="What exactly will you do? Be concrete and specific."></textarea>
                </div>
                <div class="field-group">
                    <label class="field-label">Timeline</label>
                    <input type="text" placeholder="When will you complete this?">
                </div>
                <div class="field-group">
                    <label class="field-label">WIN This Creates</label>
                    <textarea placeholder="What concrete win will completing this action create?"></textarea>
                </div>
            `;
            container.appendChild(newAction);
            newAction.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        function printGoalMap() {
            window.print();
        }
        
        function copyToClipboard() {
            let text = 'CAREER GOAL MAP\n\n';
            
            // Long-term goal
            text += '=== LONG-TERM GOAL (5-10 years) ===\n';
            text += document.getElementById('longterm').value + '\n\n';
            
            // Motivational foundation
            text += '=== MOTIVATIONAL FOUNDATION ===\n';
            text += 'Intrinsic Satisfaction:\n' + document.getElementById('intrinsic').value + '\n\n';
            text += 'Values Alignment:\n' + document.getElementById('values').value + '\n\n';
            text += 'Desired Impact:\n' + document.getElementById('impact').value + '\n\n';
            
            // Medium-term goals
            text += '=== MEDIUM-TERM GOALS (1-3 years) ===\n';
            const goalCards = document.querySelectorAll('.goal-card');
            goalCards.forEach((card, index) => {
                text += `Goal #${index + 1}:\n`;
                const inputs = card.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    const label = input.previousElementSibling;
                    if (label && input.value) {
                        text += `${label.textContent}: ${input.value}\n`;
                    }
                });
                text += '\n';
            });
            
            // Short-term actions
            text += '=== SHORT-TERM ACTION STEPS (1-3 months) ===\n';
            const actionCards = document.querySelectorAll('.action-card');
            actionCards.forEach((card, index) => {
                text += `Action #${index + 1}:\n`;
                const inputs = card.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    const label = input.previousElementSibling;
                    if (label && input.value) {
                        text += `${label.textContent}: ${input.value}\n`;
                    }
                });
                text += '\n';
            });
            
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… Your goal map has been copied to clipboard! You can now paste it into any document.');
            }).catch(() => {
                alert('âŒ Unable to copy. Please use Print/Save as PDF instead.');
            });
        }
        
        function clearForm() {
            if (confirm('Are you sure you want to clear all your work and start over? This cannot be undone.')) {
                localStorage.removeItem('careerGoalMap');
                location.reload();
            }
        }
        
        // Auto-save to localStorage
        function autoSave() {
            const formData = {
                longterm: document.getElementById('longterm').value,
                intrinsic: document.getElementById('intrinsic').value,
                values: document.getElementById('values').value,
                impact: document.getElementById('impact').value,
                mediumGoals: [],
                shortActions: [],
                timestamp: new Date().toISOString()
            };
            
            // Save medium goals
            document.querySelectorAll('.goal-card').forEach(card => {
                const goalData = {};
                card.querySelectorAll('input, textarea').forEach((input, idx) => {
                    goalData[`field_${idx}`] = input.value;
                });
                formData.mediumGoals.push(goalData);
            });
            
            // Save short actions
            document.querySelectorAll('.action-card').forEach(card => {
                const actionData = {};
                card.querySelectorAll('input, textarea').forEach((input, idx) => {
                    actionData[`field_${idx}`] = input.value;
                });
                formData.shortActions.push(actionData);
            });
            
            localStorage.setItem('careerGoalMap', JSON.stringify(formData));
        }
        
        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);
        
        // Also save on input
        document.addEventListener('input', function() {
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(autoSave, 2000);
        });
        
        // Load saved data on page load
        window.addEventListener('load', function() {
            const saved = localStorage.getItem('careerGoalMap');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    const savedDate = new Date(data.timestamp).toLocaleDateString();
                    
                    if (confirm(`Found previously saved work from ${savedDate}. Would you like to restore it?`)) {
                        document.getElementById('longterm').value = data.longterm || '';
                        document.getElementById('intrinsic').value = data.intrinsic || '';
                        document.getElementById('values').value = data.values || '';
                        document.getElementById('impact').value = data.impact || '';
                        
                        // Trigger word count update
                        document.getElementById('longterm').dispatchEvent(new Event('input'));
                        
                        // Restore medium goals if more than default
                        if (data.mediumGoals && data.mediumGoals.length > 1) {
                            for (let i = 1; i < data.mediumGoals.length; i++) {
                                addMediumGoal();
                            }
                        }
                        
                        // Restore short actions if more than default
                        if (data.shortActions && data.shortActions.length > 2) {
                            for (let i = 2; i < data.shortActions.length; i++) {
                                addShortAction();
                            }
                        }
                        
                        // Restore field values
                        setTimeout(() => {
                            document.querySelectorAll('.goal-card').forEach((card, idx) => {
                                if (data.mediumGoals[idx]) {
                                    const inputs = card.querySelectorAll('input, textarea');
                                    inputs.forEach((input, fieldIdx) => {
                                        input.value = data.mediumGoals[idx][`field_${fieldIdx}`] || '';
                                    });
                                }
                            });
                            
                            document.querySelectorAll('.action-card').forEach((card, idx) => {
                                if (data.shortActions[idx]) {
                                    const inputs = card.querySelectorAll('input, textarea');
                                    inputs.forEach((input, fieldIdx) => {
                                        input.value = data.shortActions[idx][`field_${fieldIdx}`] || '';
                                    });
                                }
                            });
                        }, 100);
                    }
                } catch (e) {
                    console.error('Error loading saved data:', e);
                }
            }
        });
        
        // Warn before leaving if there's unsaved work
        window.addEventListener('beforeunload', function(e) {
            const hasContent = document.getElementById('longterm').value.trim().length > 0;
            if (hasContent) {
                autoSave();
            }
        });
    </script>
</body>
</html>